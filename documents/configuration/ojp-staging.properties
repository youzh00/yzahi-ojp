# OJP Staging Environment Configuration
# File: ojp-staging.properties
#
# This configuration is optimized for staging/pre-production environments with:
# - Moderate connection pools similar to production but scaled down
# - Settings that closely mirror production for accurate testing
# - Balanced resource usage

# ============================================================================
# Connection Pool Configuration (Non-XA)
# ============================================================================

# Moderate pool size for staging - scaled-down production settings
ojp.connection.pool.maximumPoolSize=25
ojp.connection.pool.minimumIdle=5

# Production-like timeouts for realistic testing
ojp.connection.pool.connectionTimeout=15000
ojp.connection.pool.idleTimeout=600000
ojp.connection.pool.maxLifetime=1800000

# Transaction isolation level
ojp.connection.pool.defaultTransactionIsolation=READ_COMMITTED

# ============================================================================
# XA Connection Pool Configuration
# ============================================================================

# XA pool settings for staging - scaled-down production settings
ojp.xa.connection.pool.maxTotal=20
ojp.xa.connection.pool.minIdle=4
ojp.xa.connection.pool.connectionTimeout=20000
ojp.xa.connection.pool.idleTimeout=600000
ojp.xa.connection.pool.maxLifetime=1800000
ojp.xa.connection.pool.timeBetweenEvictionRuns=30000
ojp.xa.connection.pool.numTestsPerEvictionRun=10
ojp.xa.connection.pool.softMinEvictableIdleTime=60000

# ============================================================================
# Named DataSource Configurations
# ============================================================================

# Web application datasource for staging
webapp.ojp.connection.pool.maximumPoolSize=30
webapp.ojp.connection.pool.minimumIdle=8
webapp.ojp.connection.pool.connectionTimeout=12000
webapp.ojp.connection.pool.idleTimeout=600000

# Web application XA pool
webapp.ojp.xa.connection.pool.maxTotal=25
webapp.ojp.xa.connection.pool.minIdle=5
webapp.ojp.xa.connection.pool.connectionTimeout=20000

# API service datasource for staging
api.ojp.connection.pool.maximumPoolSize=20
api.ojp.connection.pool.minimumIdle=5
api.ojp.connection.pool.connectionTimeout=10000
api.ojp.connection.pool.idleTimeout=300000

# API service XA pool
api.ojp.xa.connection.pool.maxTotal=15
api.ojp.xa.connection.pool.minIdle=4
api.ojp.xa.connection.pool.connectionTimeout=15000

# Batch processing datasource for staging
batchJob.ojp.connection.pool.maximumPoolSize=12
batchJob.ojp.connection.pool.minimumIdle=3
batchJob.ojp.connection.pool.connectionTimeout=25000
batchJob.ojp.connection.pool.maxLifetime=2400000

# Batch processing XA pool
batchJob.ojp.xa.connection.pool.maxTotal=10
batchJob.ojp.xa.connection.pool.minIdle=2
batchJob.ojp.xa.connection.pool.connectionTimeout=25000

# Reporting/Analytics datasource for staging
reporting.ojp.connection.pool.maximumPoolSize=10
reporting.ojp.connection.pool.minimumIdle=2
reporting.ojp.connection.pool.connectionTimeout=20000
reporting.ojp.connection.pool.idleTimeout=900000

# Reporting XA pool
reporting.ojp.xa.connection.pool.maxTotal=8
reporting.ojp.xa.connection.pool.minIdle=2
reporting.ojp.xa.connection.pool.connectionTimeout=20000

# ============================================================================
# gRPC Configuration
# ============================================================================

# Maximum inbound message size (24MB for staging - between dev and prod)
ojp.grpc.maxInboundMessageSize=25165824

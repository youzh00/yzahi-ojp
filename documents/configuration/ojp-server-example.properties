# Example OJP Server Configuration with Slow Query Segregation
# This file shows how to configure the slow query segregation feature

# Basic server settings
ojp.server.port=1059
ojp.server.threadPoolSize=200

# Logging Configuration
# Root log level (DEBUG, INFO, WARN, ERROR) - affects all loggers unless overridden
ojp.server.logLevel=INFO

# Log file location (default: logs/ojp-server.log)
# ojp.server.log.file=logs/ojp-server.log

# Rolling file pattern (default: logs/ojp-server.%d{yyyy-MM-dd}.log)
# ojp.server.log.fileNamePattern=logs/ojp-server.%d{yyyy-MM-dd}.log

# Number of days to keep log files (default: 30)
# ojp.server.log.maxHistory=30

# Total size cap for all log files (default: 1GB)
# ojp.server.log.totalSizeCap=1GB

# Log message pattern (default: %d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n)
# ojp.server.log.pattern=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# Circuit Breaker settings  
ojp.server.circuitBreakerTimeout=60000
ojp.server.circuitBreakerThreshold=3

# Slow Query Segregation Configuration
# Enable or disable the slow query segregation feature
ojp.server.slowQuerySegregation.enabled=true

# Percentage of execution slots allocated to slow operations (0-100)
# Default: 20% for slow, 80% for fast operations
ojp.server.slowQuerySegregation.slowSlotPercentage=20

# Idle timeout before slots can be borrowed between pools (milliseconds)
# Default: 10 seconds
ojp.server.slowQuerySegregation.idleTimeout=10000

# Timeout for acquiring slow operation slots (milliseconds)
# Default: 120 seconds
ojp.server.slowQuerySegregation.slowSlotTimeout=120000

# Timeout for acquiring fast operation slots (milliseconds)  
# Default: 60 seconds
ojp.server.slowQuerySegregation.fastSlotTimeout=60000

# Interval for updating global average in seconds (0 = update on every query)
# Default: 300 seconds (5 minutes)
ojp.server.slowQuerySegregation.updateGlobalAvgInterval=300

# ============================================================================
# Transaction Isolation Configuration
# ============================================================================
# Configure the default transaction isolation level for connection pools.
# If not specified, OJP will use READ_COMMITTED as the default.
# 
# Valid values (case-insensitive):
#   - NONE / TRANSACTION_NONE
#   - READ_UNCOMMITTED / TRANSACTION_READ_UNCOMMITTED
#   - READ_COMMITTED / TRANSACTION_READ_COMMITTED (default)
#   - REPEATABLE_READ / TRANSACTION_REPEATABLE_READ
#   - SERIALIZABLE / TRANSACTION_SERIALIZABLE
#
# Examples:
# ojp.connection.pool.defaultTransactionIsolation=READ_COMMITTED
# ojp.connection.pool.defaultTransactionIsolation=SERIALIZABLE
#
# For XA connections (distributed transactions):
# ojp.xa.connection.pool.defaultTransactionIsolation=READ_COMMITTED
#
# When configured, all connections in the pool will be reset to this isolation
# level when returned to the pool, preventing isolation level pollution between
# different client sessions.
# ============================================================================


# ============================================================================
# TLS/mTLS Configuration
# ============================================================================
# Configure TLS (Transport Layer Security) for secure, encrypted communication
# between OJP clients and server. Supports both server-only TLS and mutual TLS
# (mTLS) where both client and server authenticate each other.
#
# For detailed configuration guide, see: documents/configuration/mtls-configuration-guide.md
# ============================================================================

# Enable TLS (default: false)
# When true, the server will use TLS for all client connections
#ojp.server.tls.enabled=true

# Path to server's keystore file containing the server certificate and private key
# Required when TLS is enabled
#ojp.server.tls.keystore.path=/etc/ojp/ssl/server-keystore.jks

# Password for the server keystore
# Required when TLS is enabled
#ojp.server.tls.keystore.password=changeit

# Keystore type (default: JKS)
# Supported types: JKS, PKCS12, JCEKS
#ojp.server.tls.keystore.type=JKS

# Path to truststore file for verifying client certificates (optional)
# Only needed if client authentication is required (mTLS)
# If not specified and clientAuthRequired=true, JVM default truststore will be used
#ojp.server.tls.truststore.path=/etc/ojp/ssl/server-truststore.jks

# Password for the truststore
#ojp.server.tls.truststore.password=changeit

# Truststore type (default: JKS)
#ojp.server.tls.truststore.type=JKS

# Require client certificate authentication - mTLS (default: false)
# When true, all clients must present a valid certificate
# When false, only server presents its certificate (one-way TLS)
#ojp.server.tls.clientAuthRequired=true

# Example Production Configuration with mTLS:
# ojp.server.tls.enabled=true
# ojp.server.tls.keystore.path=/etc/ojp/ssl/server.jks
# ojp.server.tls.keystore.password=${SERVER_KEYSTORE_PASSWORD}
# ojp.server.tls.truststore.path=/etc/ojp/ssl/truststore.jks  
# ojp.server.tls.truststore.password=${TRUSTSTORE_PASSWORD}
# ojp.server.tls.clientAuthRequired=true

